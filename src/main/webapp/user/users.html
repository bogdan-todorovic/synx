<div class="container users-container">
    <div class="row">
        <div class="col-xs-12 col-md-6 col-md-offset-3 wrapper">
            
            <h2>Current users</h2>
            <div class="input-group">
                <input type="text" class="form-control" ng-model="searchText" ng-change="search(searchText)" placeholder="Search">
                <span class="input-group-btn">
                    <button class="btn search" type="button">
                        <i class="glyphicon glyphicon-search"></i>
                    </button>
                </span>
            </div>
            <ul class="list-group user-list">
                <li class="list-group-item" ng-repeat="user in filteredUsers" ng-if="user.role!='ADMIN'">
                    <a ui-sref="user({username: user.username})">{{user.username}}</a>

                    <div class="right-side" ng-if="$root.user.role === 'ADMIN'">
                        <!-- New role selector -->
                        <select id="role-selector" ng-model="user.newRole">
                            <option value="">
                                NEW ROLE
                            </option>
                            
                            <option ng-if="user.role!='USER'" value="USER">
                                USER
                            </option>
                            
                            <option ng-if="user.role!='MODERATOR'" value="MODERATOR">
                                MODERATOR
                            </option>
                            
                            <option value="ADMIN">
                                ADMIN
                            </option>
                        </select>
                    </div>
                </li>
            </ul>
            <div class="btn-container" ng-if="$root.user.role === 'ADMIN'">
                <button class="btn btn-primary btn-save" ng-click="updateRoles()">Update</button>
            </div>
        </div>
    </div>
</div>